<div class="content-wrapper">
  <div class="row justify-content-center">
    <div class="col-sm-8 mt-3">
      <h4>Update book</h4>

      <form action="/book/add" method="PUT">
        <div class="form-row">
          <div class="form-group col-md-8">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" name="name" value="{{book.name}}" />
          </div>
          <div class="form-group col-md-4">
            <label for="id">ID:</label>
            <input type="text" class="form-control" id="id" name="id" value="{{book.id}}">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="author">Author:</label>
            <input type="text" class="form-control" id="author" name="author" value="{{book.author.name}}">
          </div>
          <div class="form-group col-md-6">
            <label for="category">Category:</label>
            <input type="text" class="form-control" id="category" name="category" value="{{#each book.category}}{{this.name}}, {{/each}}"/>
            {{!-- value="{{#each book.category}}{{this.name}}{{/each}} --}}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="quantity">Quantity:</label>
            <input type="number" class="form-control" id="quantity" name="quantity" value="{{book.quantity}}">
          </div>
          <div class="form-group col-md-6">
            <label for="price">Price:</label>
            <input type="number" class="form-control" id="price" name="price" value="{{book.price}}">
          </div>
        </div>
        <div class="form-group">
          <label for="image">Image url:</label>
          <input type="url" class="form-control" id="image" name="image" value="{{book.image}}">
        </div>
        <div class="form-group">
          <label for="description">Description</label>
          {{!-- <input type="text" class="form-control" id="description" name="description" value="{{book.description}}"> --}}
          <textarea class="form-control" id="description" name="description" rows="7">{{book.description}}</textarea>
        </div>
        <input type="submit" class="btn" style="color: white; background-color: #2980b9" value="Update"/>

      </form>
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="col-sm-12">
      <div class="preview-images"></div>
    </div>
  </div>
</div>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

{{!-- <script>
  const categoryNames = {{book.category}}.map(category => category.name);
  document.getElementById("category").value = categoryNames.join(", ");
</script> --}}


{{!-- <script>
  $(document).ready(function () {
    let imagesPreview = function (input, placeToInsertImagePreview) {
      if (input.files) {
        let filesAmount = input.files.length;
        for (i = 0; i < filesAmount; i++) {
          let reader = new FileReader();
          reader.onload = function (event) {
            $($.parseHTML("<img>"))
              .attr("src", event.target.result)
              .appendTo(placeToInsertImagePreview);
          };
          reader.readAsDataURL(input.files[i]);
        }
      }
    };
    $("#input-files").on("change", function () {
      imagesPreview(this, "div.preview-images");
    });
  });
</script> --}}